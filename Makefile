# VPN Core Service - Makefile
# Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ core ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ¼

.PHONY: help install dev build start lint format test clean docker-up docker-down docker-logs setup-env

# ============================================================================
# ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ
# ============================================================================

help:
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘  VPN Core Service - Makefile                                â•‘"
	@echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
	@echo "â•‘  ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:                                           â•‘"
	@echo "â•‘    make install        - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (npm i)      â•‘"
	@echo "â•‘    make dev            - Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² dev Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ (watch)         â•‘"
	@echo "â•‘    make build          - Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°                      â•‘"
	@echo "â•‘    make start          - Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ ÑĞ±Ğ¾Ñ€ĞºĞ¸              â•‘"
	@echo "â•‘    make lint           - ESLint Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°                     â•‘"
	@echo "â•‘    make format         - Prettier Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ             â•‘"
	@echo "â•‘    make test           - Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²                       â•‘"
	@echo "â•‘    make clean          - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° node_modules Ğ¸ dist         â•‘"
	@echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
	@echo "â•‘  Docker ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:                                             â•‘"
	@echo "â•‘    make docker-up        - Ğ—Ğ°Ğ¿ÑƒÑĞº Docker Compose             â•‘"
	@echo "â•‘    make docker-down      - ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Docker Compose          â•‘"
	@echo "â•‘    make docker-logs      - Ğ›Ğ¾Ğ³Ğ¸ Docker Compose               â•‘"
	@echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
	@echo "â•‘  Setup:                                                      â•‘"
	@echo "â•‘    make setup-env        - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env Ğ¸Ğ· .env.example      â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

# ============================================================================
# ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
# ============================================================================

install:
	@echo "ğŸ“¦ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹..."
	npm install

dev:
	@echo "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² dev Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ..."
	npm run start:dev

build:
	@echo "ğŸ”¨ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°..."
	npm run build

start:
	@echo "â–¶ï¸ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ ÑĞ±Ğ¾Ñ€ĞºĞ¸..."
	npm run start:prod

lint:
	@echo "ğŸ” ESLint Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°..."
	npm run lint

format:
	@echo "âœ¨ Prettier Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ..."
	npm run format

test:
	@echo "ğŸ§ª Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²..."
	npm run test

clean:
	@echo "ğŸ§¹ ĞÑ‡Ğ¸ÑÑ‚ĞºĞ°..."
	rm -rf node_modules dist
	@echo "âœ… ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°!"

# ============================================================================
# Docker ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
# ============================================================================

docker-up:
	@echo "ğŸ³ Ğ—Ğ°Ğ¿ÑƒÑĞº Docker Compose..."
	docker-compose up -d
	@echo "âœ… Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½!"

docker-down:
	@echo "ğŸ›‘ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Docker Compose..."
	docker-compose down

docker-logs:
	@echo "ğŸ“‹ Ğ›Ğ¾Ğ³Ğ¸ Docker Compose..."
	docker-compose logs -f

# ============================================================================
# Setup
# ============================================================================

setup-env:
	@echo "ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ .env Ğ¸Ğ· .env.example..."
	cp -n .env.example .env || echo "âš ï¸ .env ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚"
	@echo "âœ… .env ÑĞ¾Ğ·Ğ´Ğ°Ğ½! Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ."
